\clearpage
\section*{\currfilename}

\begin{figure}[H]
  \fontsize{14pt}{14pt}\selectfont
  \begin{center}
    \begin{tikzpicture}[auto, scale=0.6, every node/.style={transform shape}, node distance=0.1cm, >=latex']
      \node[input](input1){};
      \node[gainblockright,right of=input1, node distance=3.0cm, minimum height=0.1cm, minimum width=1.0cm] (block1) {$K_{q_{\text{cmd}}}$};
      \node[whitesum,right of=block1, node distance=2.5cm] (sum1) {};
      \node[squareblock, minimum height=1cm, minimum width=2cm, right of=sum1,node distance=2.5cm] (block2) {\shortstack{Short \\ Period}};
      \node[output, right of=block2,node distance=2.5cm] (output1) {};
      \node[output, right of=output1,node distance=1.0cm] (output2) {};
      \node[output, right of=output2,node distance=1.5cm] (output3) {};
      \node[gainblockleft, above of=block2,node distance=2.0cm, minimum width=1.0cm](block3){\rotatebox{180}{$K_{\alpha}$}};
      \node[gainblockleft, above of=block3,node distance=2.0cm, minimum width=1.0cm](block4){\rotatebox{180}{$K_{q}$}};
      \node[gainblockright, minimum height=1cm, minimum width=2cm, left of=input1,node distance=1.0cm] (block5) {$K_{\theta}$};
      \node[whitesum,left of=block5, node distance=2.5cm] (sum2) {};
      \node[input,left of=sum2, node distance=2.5cm] (input2) {};
      \node[squareblock, minimum height=1cm, minimum width=2cm, right of=output3,node distance=2.0cm] (block6) {$\frac{1}{s}$};
      \node[output, right of=block6,node distance=2.5cm] (output4) {};
      \node[output, right of=output4,node distance=2.5cm] (output5) {};
      \node[input, below of=block4,node distance=2.5cm] (input3) {};

      %\draw[->](input1) -- node[pos=0.4]{$q_{\text{cmd}}$} (block1);
      \draw[->](block1) -- (sum1);
      \draw[->](sum1) -- node[pos=0.5]{$\delta_{e}$}(block2);
      \draw[vecNoArrow](block2) -- (output1);
      \draw[vecNoArrow](output1) -- (output2);
      \draw[vecArrow](output2) -- node[pos=0.5]{$q$}(block6);
      \draw[->](output1) |- (block3);
      \draw[->](output2) |- (block4);
      \draw[->](block3) -| (sum1);
      \draw[->](block4) -| (sum1);
      \draw[->](input2) -- node[pos=0.5]{$\theta_{\text{cmd}}$} (sum2);
      \draw[->](sum2) -- (block5);
      \draw[->](block5) -- (block1);
      \draw[-](output4) |- (input3);
      \draw[->](input3) -| (sum2);
      \draw[-](block6) -- (output4);
      \draw[-](output4) -- node[pos=0.5]{$\theta$} (output5);

      % Dotted line around short period
      \begin{pgfonlayer}{background}
        \path (block1 |- block1)+(-1.5,1.2) node (c) {};
        \path (block4 -| block4)+(4.0,-1.2) node (d) {};
        \path[draw, dashed] (c) rectangle (d);
      \end{pgfonlayer}

      % Dotted line around
      \begin{pgfonlayer}{background}
        \path (sum2 |- sum2)+(-1.5,1.2) node (c) {};
        \path (block6 -| block6)+(4.0,-6.2) node (d) {};
        \path[draw, dashed] (c) rectangle (d);
      \end{pgfonlayer}
    \end{tikzpicture}
  \end{center}
\end{figure}
