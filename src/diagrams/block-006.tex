\clearpage
\section*{\currfilename}

\begin{figure}[H]
  \fontsize{10pt}{10pt}\selectfont
  \begin{center}
    % \resizebox{8cm}{2.6cm}{
    \begin{tikzpicture}[auto, scale=1.0, every node/.style={transform shape}, node distance=1.0cm, >=latex']
      \node[squareblock, minimum height=1cm, minimum width=2cm] (block1){Baseline};
      \node[squareblock, below of=block1, node distance=1.5cm, minimum height=1cm, minimum width=2cm] (block2){Adaptive};

      \matrix[ampersand replacement=\&, row sep=0.5cm, left of=block1,node distance=1cm] (block1in) {
        \node [coordinate] (b1inA) {}; \\
        \node [coordinate] (b1inB) {}; \\
      };

      \matrix[ampersand replacement=\&, row sep=0.5cm, left of=block2,node distance=1cm] (block2in) {
        \node [coordinate] (b2inA) {}; \\
        \node [coordinate] (b2inB) {}; \\
      };

      \node[whitesum,right of=block1, node distance=2.0cm] (sum1) {};
      \node[squareblock, minimum height=1cm, minimum width=2cm, right of=sum1,node distance=2.5cm] (block3) {Plant};
      \node[squareblock, minimum height=1cm, minimum width=2cm, above of=block3,node distance=1.75cm] (block4) {\shortstack[c]{Reference\\Model}};
      \node[whitesum,right of=block3, node distance=2.5cm] (sum2) {};
      \node[input,below of=block2, node distance=1.5cm] (input2) {};
      \node[output,right of=sum2, node distance=1.5cm] (output1) {};

      % Gray shaded box
      \begin{pgfonlayer}{background}
      \path (block1 |- block1)+(-2.5,0.7) node (c) {};
      \path (block2 -| block2)+(2.5,-0.7) node (d) {};
      \path[fill=gray!20, draw, dashed] (c) rectangle (d);
      \end{pgfonlayer}

      % Draw
      \draw [->]  (b1inA) + (-2.5cm,0cm) -> node [pos=0.0]{$z_{\text{cmd}}$}  (b1inA);
      \draw [->]  (b1inA) + (-2.0cm,0cm) |- node [pos=0.15]{}  (block4);
      \draw [->]  (b1inB) + (-0.5cm,0cm) -> (b1inB);
      \draw [->]  (b2inA) + (-1cm,0cm) -> (b2inA);
      \draw [->]  (b2inB) + (-2.0cm,0cm) -> (b2inB);
      \draw [-]  (b2inB) + (-2.0cm,0cm) |- (input2);
      \draw[->](block3) --  node[name=yi,pos=0.5]{} (sum2);
      \draw[-](yi) |- (input2);
      % \draw[-](b1inB) + (-0.5cm,0cm) -- (2B2);
      % \draw[-](b1inA) + (-1.0cm,0cm) -- (2A2) ;
      \draw[->](block1) -- (sum1);
      \draw[->](block2) -| (sum1);
      \draw[->](sum1) -- (block3);
      % \draw[->](input1a) + (-2.5cm,0cm) |- (block4);
      \draw[->](block4) -| (sum2);
      \draw[->](sum2) -- (output1);

      % \draw[->](block3) -- (block4);
      % \draw[->](block4) -- (block5);
      % \draw[->](block5) -- (sum2);
      % \draw[->](sum2) -- (block6);
      % \draw[->](block6) -- node[name=azoh,pos=0.4]{} (block7);
      % \draw[->](input3) -- (sum2);
      % \draw[->](input1) -- node[pos=0.2]{$z_{\text{cmd}}$} (sum1);
      % \draw[->](sum1) -- node[pos=0.5]{$\dot{x}_{e}$} (block1);
      % \draw[->](block1) -- node[pos=0.6]{$x_{e}$} (b2inB);
      % \draw[->](block2) -- node[name=x,pos=0.5]{$x$} (input4a);
      % \draw[->](input4a) |- (block4);
      % \draw[->](input4a) |- (block5);
      % \draw[->](block4) -| node[pos=0.2]{$u_{\text{bl}}$} node[pos=0.9]{$+$} (sum2);
      % \draw[->](sum2) -- node[pos=0.7]{$u$} (block6);
      % \draw[->](block5) -| node[pos=0.2]{$u_{\text{ad}}$} node[pos=0.9]{$+$} (sum2);
      % \draw[->](block3) -- node[pos=0.5]{$z$} (sum1);
      % \draw[->](input2) -- (block3);
      % \draw[->](block6) -- node[pos=0.3]{$x_{p}$} node[name=xp,pos=0.5]{} node[pos=0.8]{$+$} (sum3);
      % \draw[->](block7) -| node[pos=0.2]{$x_{m}^{o}$} node[pos=0.9]{$-$} (sum3);
      % \draw[-](sum3) -- node[name=eo,pos=0.5]{$e^{o}$} (output1);
      % \draw[-](xp) |- node[pos=0.5]{} (input2);
      % \draw[->](input2) |- node[pos=0.8]{$x_{p}$} (b2inA);
      % \draw[->](input1a) |- (block7);
      % \draw[-](output1) |- (arrow1);
    \end{tikzpicture}
    % \vspace{-0.1in}
    \caption{\fontsize{7pt}{7pt}\selectfont \textbf{Classical open loop reference model adaptive control architecture}}
  \end{center}
\end{figure}
